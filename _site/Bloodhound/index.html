<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>BloodHound - creep33.github.io</title>
<meta name="description" content="Herramienta para listar información de un Active Directory y interpretarla para posibles User Pivotings o Privilege Escalation.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="creep33.github.io">
<meta property="og:title" content="BloodHound">
<meta property="og:url" content="http://localhost:4000/Bloodhound/">


  <meta property="og:description" content="Herramienta para listar información de un Active Directory y interpretarla para posibles User Pivotings o Privilege Escalation.">



  <meta property="og:image" content="http://localhost:4000/assets/images/Tools/bash-icon.png">





  <meta property="article:published_time" content="2021-12-08T00:00:00+01:00">





  

  


<link rel="canonical" href="http://localhost:4000/Bloodhound/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "creep33",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="creep33.github.io Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/masthead.png" alt=""></a>
                
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
    

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">BloodHound</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/avatar.png" alt="creep33" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">creep33</h3>
    
    
      <p class="author__bio" itemprop="description">
        Cibersecurity and<br>Ethical Hacking Student
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Spain</span>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/creep33" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="BloodHound">
    <meta itemprop="description" content="Herramienta para listar información de un Active Directory y interpretarla para posibles User Pivotings o Privilege Escalation.">
    <meta itemprop="datePublished" content="December 08, 2021">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">BloodHound
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p class="page__meta">
          
            <i class="fa fa-fw fa-calendar" aria-hidden="true"></i> <time datetime="2021-12-08T00:00:00+01:00">December 08, 2021 </time>&emsp;
          
          
        </p>
        <h1 id="definición">Definición</h1>
<p>Bloodhound es una herramienta que nos permite listar información de un <a href="/Active-Directory/">Active Directory</a>, la cual se aprovecha de una base de datos neo4j que tenemos que estar corriendo en nuestro equipo. Y tenemos que proporcionarle datos obtenidos con diferentes utilidades que se explicarán más adelante.</p>

<p>BloodHound utiliza la teoría de los gráficos para revelar las relaciones ocultas y a menudo no intencionadas dentro de un entorno de <a href="/Active-Directory/">Active Directory</a>. Los atacantes pueden utilizar BloodHound para identificar fácilmente rutas de ataque muy complejas que, de otro modo, serían imposibles de identificar rápidamente. Los defensores pueden utilizar BloodHound para identificar y eliminar esas mismas rutas de ataque. Tanto los equipos azules como los rojos pueden utilizar BloodHound para obtener fácilmente una comprensión más profunda de las relaciones de privilegio en un entorno de <a href="/Active-Directory/">Active Directory</a>.</p>

<p>La herramienta se encuentra en <a href="https://github.com/BloodHoundAD/BloodHound">github</a>.</p>

<h1 id="uso">Uso</h1>
<h2 id="inicialización">Inicialización</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>neo4j console
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bloodhound &amp;&gt;/dev/null &amp;
<span class="nb">disown</span>
</code></pre></div></div>

<p>Iniciamos sesión con las credenciales de neo4j.</p>

<h2 id="recolección-de-información">Recolección de información</h2>
<h3 id="sharphoundps1">SharpHound.ps1</h3>
<p>Este script en powershell nos permite recopilar infomación en local.
Podemos encontrar el script en <a href="https://github.com/BloodHoundAD/BloodHound/blob/master/Collectors/SharpHound.ps1">github</a>.</p>

<p>Tenemos que subir la herramienta a la maquina victima, importarla y ejecutarla.</p>
<h4 id="importación">Importación</h4>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Import-Module</span><span class="w"> </span><span class="o">.</span><span class="nx">\Sharphound.ps1</span><span class="w">
</span></code></pre></div></div>
<h4 id="modos-de-uso">Modos de uso</h4>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Invoke-Bloodhound</span><span class="w"> </span><span class="nt">-LoopInterval</span><span class="w"> </span><span class="nx">00:01:00</span><span class="w"> </span><span class="nt">-LoopDuration</span><span class="w"> </span><span class="nx">00:10:00</span><span class="w">
</span><span class="n">Invoke-Bloodhound</span><span class="w"> </span><span class="nt">-CollectionMethod</span><span class="w"> </span><span class="nx">All</span><span class="w">
</span><span class="n">Invoke-Bloodhound</span><span class="w"> </span><span class="nt">-CollectionMethod</span><span class="w"> </span><span class="nx">DCOnly</span><span class="w"> </span><span class="nt">--NoSaveCache</span><span class="w"> </span><span class="nt">--RandomFilenames</span><span class="w"> </span><span class="nt">--EncryptZip</span><span class="w">
</span></code></pre></div></div>

<p>Esta, crea un comprimido que tendremos que pasar a la maquina de atacante para importarlo en bloodhound.</p>

<h3 id="bloodhound-python">bloodhound-python</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bloodhound-python <span class="nt">-u</span> <span class="s1">'user'</span> <span class="nt">-p</span> <span class="s1">'userpass'</span> <span class="nt">-ns</span> 10.10.10.10 <span class="nt">-d</span> dominio.local <span class="nt">-c</span> All
</code></pre></div></div>

<p>El parámetro <code class="language-plaintext highlighter-rouge">-c</code> indica el <strong>COLECTIONMETHOD</strong>, funcionan tanto para esta herrmienta como para SharpHound.ps1. Estos son los disponibles:
<code class="language-plaintext highlighter-rouge">Group, LocalAdmin, Session, Trust, Default (all previous), DCOnly (no computer connections), DCOM, RDP, PSRemote, LoggedOn, ObjectProps, ACL, All (All except LoggedOn)</code>
Puedes especificar más de uno separándolo con comas.</p>

<h2 id="interpretación">Interpretación</h2>

<p>Le damos a <strong>upload data</strong> y seleccionamos los archivos/archivo.</p>

<p>En <strong>Analysis</strong> podemos ejecutar distintas utilidades de enumeración.</p>

<p>Si tenemos algun usuario comprometido podemos marcarlo como <strong>pwned</strong></p>

<hr />

<p>Escrito el 08-12-2021 a las 02:20 pm por creep33.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#active-directory" class="page__taxonomy-item" rel="tag">Active Directory</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#cli" class="page__taxonomy-item" rel="tag">CLI</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#tools" class="page__taxonomy-item" rel="tag">Tools</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-12-08T00:00:00+01:00">December 08, 2021</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/rpc/" class="pagination--pager" title="RPC
">Previous</a>
    
    
      <a href="/HTB-Forest/" class="pagination--pager" title="HTB-Forest
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 creep33</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script data-search-pseudo-elements defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>








  </body>
</html>
